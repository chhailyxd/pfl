---
const frontendSkills = [
  { name: "HTML", level: 95 },
  { name: "CSS", level: 90 },
  { name: "JavaScript", level: 95 },
  { name: "React", level: 90 },
  { name: "Vue", level: 85 },
  { name: "Svelte", level: 80 },
];

const backendSkills = [
  { name: "Node.js", level: 85 },
  { name: "Python", level: 80 },
  { name: "Express", level: 85 },
  { name: "MongoDB", level: 80 },
  { name: "PostgreSQL", level: 75 },
  { name: "GraphQL", level: 70 },
];

const tools = [
  { name: "Git", level: 90 },
  { name: "Docker", level: 80 },
  { name: "AWS", level: 75 },
  { name: "Figma", level: 70 },
  { name: "Jest", level: 85 },
  { name: "CI/CD", level: 75 },
];
---

<section id="skills" class="skills-section">
  <div class="container">
    <h2 class="section-title fade-in">My Skills</h2>
    <p class="section-subtitle fade-in delay-100">
      A comprehensive overview of my technical expertise and tools I work with
    </p>

    <div class="skills-container">
      <div class="skills-category fade-in delay-100">
        <h3>Frontend Development</h3>
        <div class="skills-list">
          {
            frontendSkills.map((skill, index) => (
              <div class="skill-item">
                <div class="skill-info">
                  <span class="skill-name">{skill.name}</span>
                  <span class="skill-percentage">{skill.level}%</span>
                </div>
                <div class="skill-bar">
                  <div 
                    class="skill-progress" 
                    data-level={skill.level}
                    style={`width: 0%; --final-width: ${skill.level}%`}
                  ></div>
                </div>
              </div>
            ))
          }
        </div>
      </div>

      <div class="skills-category fade-in delay-200">
        <h3>Backend Development</h3>
        <div class="skills-list">
          {
            backendSkills.map((skill) => (
              <div class="skill-item">
                <div class="skill-info">
                  <span class="skill-name">{skill.name}</span>
                  <span class="skill-percentage">{skill.level}%</span>
                </div>
                <div class="skill-bar">
                  <div 
                    class="skill-progress" 
                    data-level={skill.level}
                    style={`width: 0%; --final-width: ${skill.level}%`}
                  ></div>
                </div>
              </div>
            ))
          }
        </div>
      </div>

      <div class="skills-category fade-in delay-300">
        <h3>Tools & DevOps</h3>
        <div class="skills-list">
          {
            tools.map((skill) => (
              <div class="skill-item">
                <div class="skill-info">
                  <span class="skill-name">{skill.name}</span>
                  <span class="skill-percentage">{skill.level}%</span>
                </div>
                <div class="skill-bar">
                  <div 
                    class="skill-progress" 
                    data-level={skill.level}
                    style={`width: 0%; --final-width: ${skill.level}%`}
                  ></div>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .skills-section {
    background-color: var(--card-bg);
  }

  .section-subtitle {
    margin-bottom: 3rem;
    text-align: center;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    color: var(--light-text-color);
  }

  .skills-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }

  .skills-category h3 {
    font-size: 1.25rem;
    margin-bottom: 1.5rem;
    position: relative;
    padding-left: 1rem;
    border-left: 4px solid var(--primary-color);
  }

  .skills-list {
    display: flex;
    flex-direction: column;
    gap: 1.25rem;
  }

  .skill-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
  }

  .skill-name {
    font-weight: 500;
  }

  .skill-percentage {
    color: var(--primary-color);
    font-weight: 600;
  }

  .skill-bar {
    height: 8px;
    background-color: var(--background-color);
    border-radius: 4px;
    overflow: hidden;
  }

  .skill-progress {
    height: 100%;
    background-color: var(--primary-color);
    border-radius: 4px;
    width: 0%;
    transition: width 1.5s ease-out;
  }

  @media (max-width: 768px) {
    .skills-container {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.closest('.skills-category')?.querySelectorAll('.skill-progress').forEach(progress => {
            const finalWidth = progress.style.getPropertyValue('--final-width');
            progress.style.width = finalWidth;
          });
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.skills-category').forEach(category => {
      observer.observe(category);
    });
  });
</script>